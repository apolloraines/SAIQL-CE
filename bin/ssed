#!/usr/bin/env python3
import sys
import re

SYMBOLS = {
    'BTC-USD': '₿', 'ETH-USD': 'Ξ', 'SOL-USD': '◎', 'XRP-USD': '✕',
    'DOGE-USD': 'Ð', 'ADA-USD': '₳', 'AVAX-USD': '△', 'DOT-USD': '●',
    'MATIC-USD': '▽', 'LINK-USD': '⬡', 'ACTIVE': '✓', 'INACTIVE': '✗',
    'symbol': '§', 'timestamp': '⏱', 'open': '↗', 'high': '⤊',
    'low': '⤋', 'close': '↘', 'volume': '▣', 'granularity': '⌘'
}

def apply_sed(line, pattern, replacement):
    # Simple sed s/pattern/replacement/ implementation
    return re.sub(pattern, replacement, line)

# Parse arguments
if len(sys.argv) < 2:
    print("Usage: ssed 's/pattern/replacement/' [file]", file=sys.stderr)
    sys.exit(1)

sed_command = sys.argv[1]
file_path = sys.argv[2] if len(sys.argv) > 2 else None

# Parse sed command (simple s/pattern/replacement/ format)
if sed_command.startswith('s/'):
    parts = sed_command[2:].split('/')
    if len(parts) >= 2:
        pattern = parts[0]
        replacement = parts[1] if len(parts) > 1 else ''
    else:
        print("Invalid sed command format", file=sys.stderr)
        sys.exit(1)
else:
    print("Only s/pattern/replacement/ format supported", file=sys.stderr)
    sys.exit(1)

# Apply to file or stdin
if file_path:
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            for line in f:
                print(apply_sed(line.rstrip(), pattern, replacement))
    except FileNotFoundError:
        print(f"Error: File '{file_path}' not found", file=sys.stderr)
        sys.exit(1)
else:
    for line in sys.stdin:
        print(apply_sed(line.rstrip(), pattern, replacement))