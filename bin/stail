#!/usr/bin/env python3
import sys
from collections import deque

SYMBOLS = {
    'BTC-USD': '₿', 'ETH-USD': 'Ξ', 'SOL-USD': '◎', 'XRP-USD': '✕',
    'DOGE-USD': 'Ð', 'ADA-USD': '₳', 'AVAX-USD': '△', 'DOT-USD': '●',
    'MATIC-USD': '▽', 'LINK-USD': '⬡', 'ACTIVE': '✓', 'INACTIVE': '✗',
    'symbol': '§', 'timestamp': '⏱', 'open': '↗', 'high': '⤊',
    'low': '⤋', 'close': '↘', 'volume': '▣', 'granularity': '⌘'
}

def to_human(line):
    for sym, meaning in SYMBOLS.items():
        line = line.replace(sym, meaning)
    return line

# Parse arguments
n = 10  # default
file_path = None

# Handle arguments: stail N file or stail file
for arg in sys.argv[1:]:
    if arg.isdigit():
        n = int(arg)
    elif not arg.startswith('-'):
        file_path = arg

# Read from file or stdin
if file_path:
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            # Use deque to keep only last n lines
            last_lines = deque(f, maxlen=n)
            for line in last_lines:
                print(to_human(line.rstrip()))
    except FileNotFoundError:
        print(f"Error: File '{file_path}' not found", file=sys.stderr)
        sys.exit(1)
else:
    # Read from stdin
    last_lines = deque(sys.stdin, maxlen=n)
    for line in last_lines:
        print(to_human(line.rstrip()))